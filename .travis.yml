sudo: required

language: python, cpp

services:
  - docker

before_install:
- docker pull debian:jessie
- docker run debian:jessie /bin/sh -c "apt-get update && apt-get upgrade -yy && apt-get install -y --fix-missing cmake debhelper freeglut3-dev help2man ipython libboost-all-dev libbz2-dev libcgal-dev libeigen3-dev libgl1-mesa-dev libgts-dev libloki-dev libmetis-dev libopenblas-dev libqglviewer-dev libsuitesparse-dev libvtk6-dev libxi-dev libxmu-dev pyqt4-dev-tools python-all-dev python-gts python-imaging python-matplotlib python-minieigen python-numpy python-sip python-qt4 python-tk python-xlib zlib1g-dev git; git clone https://github.com/yade/trunk.git ; mkdir build ; cd build ;  cmake -DCMAKE_INSTALL_PREFIX=./../inst -DSUFFIX=-trunk ../trunk -DCHUNKSIZE=4; make -j2 ; make install ; ./../inst/bin/yade-trunk --test; ./../inst/bin/yade-trunk --check"

